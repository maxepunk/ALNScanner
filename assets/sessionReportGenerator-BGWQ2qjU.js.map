{"version":3,"file":"sessionReportGenerator-BGWQ2qjU.js","sources":["../../src/core/sessionReportGenerator.js"],"sourcesContent":["/**\n * Session Report Generator\n * Assembles a downloadable markdown report from session data.\n *\n * Data sources (all from sync:full payload + local token DB):\n * - session: id, name, startTime, endTime, teams\n * - scores: [{teamId, score}]\n * - transactions (recentTransactions): enriched with memoryType, valueRating\n * - playerScans: [{tokenId, deviceId, timestamp}]\n * - tokenDatabase: local tokens.json (has character field)\n *\n * @module core/sessionReportGenerator\n */\n\nimport { SCORING_CONFIG } from './scoring.js';\n\nexport class SessionReportGenerator {\n  /**\n   * @param {Object} tokenDatabase - Token database keyed by tokenId\n   */\n  constructor(tokenDatabase) {\n    this.tokenDatabase = tokenDatabase || {};\n  }\n\n  /**\n   * Generate a full markdown session report.\n   *\n   * @param {Object} data\n   * @param {Object} data.session - Session object (id, name, startTime, endTime, teams)\n   * @param {Array} data.scores - Team scores [{teamId, score}]\n   * @param {Array} data.transactions - Enriched transactions from sync:full\n   * @param {Array} data.playerScans - Player scan records\n   * @returns {string} Markdown report\n   */\n  generate({ session, scores, transactions, playerScans }) {\n    const duration = this._formatDuration(session.startTime, session.endTime);\n    const date = this._formatDate(session.startTime);\n    const teamCount = (session.teams || []).length;\n\n    const sections = [\n      `# Session Report: ${session.name}`,\n      `**${date} | Duration: ${duration} | Teams: ${teamCount}**`,\n      '',\n      this._buildSessionSummary(session, scores, transactions, playerScans),\n      this._buildDetectiveSection(transactions),\n      this._buildBlackMarketSection(transactions),\n      this._buildPlayerActivitySection(playerScans, transactions),\n    ];\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Build the session summary section.\n   */\n  _buildSessionSummary(session, scores, transactions, playerScans) {\n    const accepted = transactions.filter(tx => tx.status === 'accepted');\n    const detective = accepted.filter(tx => tx.mode === 'detective');\n    const blackmarket = accepted.filter(tx => tx.mode === 'blackmarket');\n    const uniqueTokens = new Set(accepted.map(tx => tx.tokenId));\n\n    // Sort scores descending\n    const sortedScores = [...scores].sort((a, b) => b.score - a.score);\n    const leaderboard = sortedScores\n      .map((s, i) => `${i + 1}. **${s.teamId}** — ${this._formatCurrency(s.score)}`)\n      .join('\\n');\n\n    const lines = [\n      '## Session Summary',\n      '',\n      `- **Teams:** ${(session.teams || []).join(', ')}`,\n      `- **Total Transactions:** ${accepted.length} (${detective.length} detective, ${blackmarket.length} black market)`,\n      `- **Player Scans:** ${playerScans.length}`,\n      `- **Unique Tokens Processed:** ${uniqueTokens.size}`,\n      '',\n      '### Final Standings',\n      '',\n      leaderboard,\n      '',\n      '---',\n      '',\n    ];\n\n    return lines.join('\\n');\n  }\n\n  /**\n   * Build the detective evidence log section.\n   */\n  _buildDetectiveSection(transactions) {\n    const detective = transactions\n      .filter(tx => tx.status === 'accepted' && tx.mode === 'detective')\n      .sort((a, b) => a.tokenId.localeCompare(b.tokenId));\n\n    const lines = [\n      '## Detective Evidence Log',\n      '',\n    ];\n\n    if (detective.length === 0) {\n      lines.push('*No detective transactions this session.*');\n      lines.push('');\n      lines.push('---');\n      lines.push('');\n      return lines.join('\\n');\n    }\n\n    lines.push('| Token | Owner | Exposed By | Time | Evidence |');\n    lines.push('|-------|-------|------------|------|----------|');\n\n    for (const tx of detective) {\n      const owner = this._getTokenOwner(tx.tokenId);\n      const time = this._formatTimestamp(tx.timestamp);\n      const evidence = (tx.summary || '—').replace(/\\|/g, '\\\\|').replace(/\\n/g, ' ');\n      lines.push(`| ${tx.tokenId} | ${owner} | ${tx.teamId} | ${time} | ${evidence} |`);\n    }\n\n    lines.push('');\n    lines.push('---');\n    lines.push('');\n    return lines.join('\\n');\n  }\n\n  /**\n   * Build the black market transactions section.\n   */\n  _buildBlackMarketSection(transactions) {\n    const blackmarket = transactions\n      .filter(tx => tx.status === 'accepted' && tx.mode === 'blackmarket')\n      .sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));\n\n    const lines = [\n      '## Black Market Transactions',\n      '',\n    ];\n\n    if (blackmarket.length === 0) {\n      lines.push('*No black market transactions this session.*');\n      lines.push('');\n      lines.push('---');\n      lines.push('');\n      return lines.join('\\n');\n    }\n\n    lines.push('| Token | Owner | Buried By | Points | Rating | Type | Breakdown |');\n    lines.push('|-------|-------|-----------|--------|--------|------|-----------|');\n\n    for (const tx of blackmarket) {\n      const owner = this._getTokenOwner(tx.tokenId);\n      const rating = tx.valueRating || 0;\n      const type = tx.memoryType || 'UNKNOWN';\n      const baseValue = SCORING_CONFIG.BASE_VALUES[rating] || 0;\n      const multiplier = SCORING_CONFIG.TYPE_MULTIPLIERS[type]\n        ?? SCORING_CONFIG.TYPE_MULTIPLIERS.UNKNOWN ?? 0;\n      const breakdown = `${this._formatCurrency(baseValue)} × ${multiplier}x`;\n      lines.push(\n        `| ${tx.tokenId} | ${owner} | ${tx.teamId} | ${this._formatCurrency(tx.points)} | ${rating}★ | ${type} | ${breakdown} |`\n      );\n    }\n\n    // Per-team subtotals\n    const teamTotals = {};\n    for (const tx of blackmarket) {\n      teamTotals[tx.teamId] = (teamTotals[tx.teamId] || 0) + tx.points;\n    }\n\n    lines.push('');\n    lines.push('### Team Subtotals');\n    lines.push('');\n    const sortedTeams = Object.entries(teamTotals).sort((a, b) => b[1] - a[1]);\n    for (const [teamId, total] of sortedTeams) {\n      lines.push(`- **${teamId}:** ${this._formatCurrency(total)}`);\n    }\n\n    lines.push('');\n    lines.push('---');\n    lines.push('');\n    return lines.join('\\n');\n  }\n\n  /**\n   * Build the player activity section.\n   */\n  _buildPlayerActivitySection(playerScans, transactions) {\n    const lines = [\n      '## Player Activity',\n      '',\n    ];\n\n    if (playerScans.length === 0) {\n      lines.push('*No player scans this session.*');\n      lines.push('');\n      return lines.join('\\n');\n    }\n\n    // Scan log table\n    const sorted = [...playerScans].sort(\n      (a, b) => new Date(a.timestamp) - new Date(b.timestamp)\n    );\n\n    lines.push('| Token | Owner | Device | Time |');\n    lines.push('|-------|-------|--------|------|');\n\n    for (const scan of sorted) {\n      const owner = this._getTokenOwner(scan.tokenId);\n      const time = this._formatTimestamp(scan.timestamp);\n      lines.push(`| ${scan.tokenId} | ${owner} | ${scan.deviceId} | ${time} |`);\n    }\n\n    // Stats\n    lines.push('');\n    lines.push('### Activity Stats');\n    lines.push('');\n\n    // Most active devices\n    const deviceCounts = {};\n    for (const scan of playerScans) {\n      deviceCounts[scan.deviceId] = (deviceCounts[scan.deviceId] || 0) + 1;\n    }\n    const sortedDevices = Object.entries(deviceCounts).sort((a, b) => b[1] - a[1]);\n    lines.push('**Most Active Devices:**');\n    for (const [deviceId, count] of sortedDevices) {\n      lines.push(`- ${deviceId}: ${count} scan${count !== 1 ? 's' : ''}`);\n    }\n\n    // Most scanned tokens\n    lines.push('');\n    const tokenCounts = {};\n    for (const scan of playerScans) {\n      tokenCounts[scan.tokenId] = (tokenCounts[scan.tokenId] || 0) + 1;\n    }\n    const sortedTokens = Object.entries(tokenCounts).sort((a, b) => b[1] - a[1]);\n    const topTokens = sortedTokens.filter(([, count]) => count > 1);\n    if (topTokens.length > 0) {\n      lines.push('**Most Scanned Tokens:**');\n      for (const [tokenId, count] of topTokens) {\n        const owner = this._getTokenOwner(tokenId);\n        lines.push(`- ${tokenId} (${owner}): ${count} scans`);\n      }\n      lines.push('');\n    }\n\n    // Tokens scanned but never turned in\n    const processedTokenIds = new Set(\n      transactions\n        .filter(tx => tx.status === 'accepted')\n        .map(tx => tx.tokenId)\n    );\n    const scannedTokenIds = new Set(playerScans.map(ps => ps.tokenId));\n    const neverTurnedIn = [...scannedTokenIds].filter(id => !processedTokenIds.has(id));\n\n    if (neverTurnedIn.length > 0) {\n      lines.push('**Tokens Scanned but Never Turned In:**');\n      for (const tokenId of neverTurnedIn.sort()) {\n        const owner = this._getTokenOwner(tokenId);\n        lines.push(`- ${tokenId} (${owner})`);\n      }\n    }\n\n    lines.push('');\n    return lines.join('\\n');\n  }\n\n  // --- Utility methods ---\n\n  /**\n   * Look up the character owner name for a token.\n   * @param {string} tokenId\n   * @returns {string} Character name or 'Unknown'\n   */\n  _getTokenOwner(tokenId) {\n    const token = this.tokenDatabase[tokenId];\n    return token?.owner || 'Unknown';\n  }\n\n  /**\n   * Format a number as currency with dollar sign and commas.\n   * @param {number} amount\n   * @returns {string}\n   */\n  _formatCurrency(amount) {\n    return '$' + (amount ?? 0).toLocaleString('en-US');\n  }\n\n  /**\n   * Format an ISO timestamp to local readable time (HH:MM).\n   * @param {string} isoTimestamp\n   * @returns {string}\n   */\n  _formatTimestamp(isoTimestamp) {\n    if (!isoTimestamp) return '—';\n    const date = new Date(isoTimestamp);\n    return date.toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: true\n    });\n  }\n\n  /**\n   * Format an ISO timestamp to a readable date string.\n   * @param {string} isoTimestamp\n   * @returns {string}\n   */\n  _formatDate(isoTimestamp) {\n    if (!isoTimestamp) return 'Unknown Date';\n    const date = new Date(isoTimestamp);\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  }\n\n  /**\n   * Format duration between two ISO timestamps as \"Xh Ym\".\n   * @param {string} startTime\n   * @param {string} endTime\n   * @returns {string}\n   */\n  _formatDuration(startTime, endTime) {\n    if (!startTime || !endTime) return 'Unknown';\n    const ms = new Date(endTime) - new Date(startTime);\n    const totalMinutes = Math.floor(ms / 60000);\n    const hours = Math.floor(totalMinutes / 60);\n    const minutes = totalMinutes % 60;\n    return `${hours}h ${minutes}m`;\n  }\n}\n"],"names":["SessionReportGenerator","tokenDatabase","session","scores","transactions","playerScans","duration","date","teamCount","accepted","tx","detective","blackmarket","uniqueTokens","leaderboard","b","s","i","a","lines","owner","time","evidence","rating","type","baseValue","SCORING_CONFIG","multiplier","breakdown","teamTotals","sortedTeams","teamId","total","sorted","scan","deviceCounts","sortedDevices","deviceId","count","tokenCounts","topTokens","tokenId","processedTokenIds","neverTurnedIn","ps","id","amount","isoTimestamp","startTime","endTime","ms","totalMinutes","hours","minutes"],"mappings":"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"}